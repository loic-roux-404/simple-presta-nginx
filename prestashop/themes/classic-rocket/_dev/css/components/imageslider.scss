
.carousel {
  position: relative;
  margin-bottom: 5%;

  .slick-list, .slick-list {
    position: static;
  }

  a {
    display: block;
    z-index: 2;

    &:not(:first-child) {
      display: none;
    }
  }

  .slider-caption {
    position: absolute;
    top: 30%;
    transform: translateY(-30%);
    width: 100vw;
    margin-bottom: 0;
    color: #fff;
    font-size: .7rem;
    z-index: 4;

    * {
      z-index: 4;
    }

    .display-2 {
      margin-bottom: .2em;
    }

    @media (min-width: map_get($grid-breakpoints, "lg")) {
      //top: 25%;
      //margin: auto 0;
      font-size: inherit;

      .display-2 {
        margin-bottom: inherit;
      }
    }
  }
}


.carousel {

  &::after {
    content: '';
    background: center bottom /100% no-repeat url('../img/itib-bg.svg'); //, -16% -15%/20% no-repeat linear-gradient(to left, $primary, darken($primary, 0.1));
    //background:50% 0/cover no-repeat;
    width: 110%;
    height: 50%;
    position: absolute;
    left: -1em;
    display: none;

    /////- width
    @media (min-width: map_get($grid-breakpoints, "sm")) {
      bottom: -12%;
      transform: translateY(9%);
      display: block;
    }

    @media (min-width: 1500px) {
      bottom: -5%;
      transform: translateY(5%);
    }
  }


}

//animate
$sep: 25%;
$m: 100%;

//timings
$d: .68s;
$t: .5s;
#index .slick-slide {

  .effect-ab, .rc::before, .rc::after {
    @include effect-ab($sep, $primary, true)
  }

  //backgrounds
  .rc::before{
    left: 0;
    transform: translateY($m);
  }

  .rc::after{
    left: $sep;
    transform: translateY(-$m);
  }

  //toggle animations
  &.slick-current {
    .rc::after, &.slick-current .rc::before {
      transform: translateY(0);
    }

    .rc::after {
      animation: shdw $t $d $bezier3 forwards;
    }
  }
}


//text
.enter-text-anime {
  animation: enter-txt $t $d $bezier forwards;
}

.exit-text-anime {
  animation: exit-txt $t $d $bezier forwards;
}

$k: 0.35;
$Y: 10em;




@each $el, $i in $toAnim {

  .slick-slide #{unquote($el)} {
    transition: opacity 2s;
    opacity: 0;
    @include tsY($Y);
  }

  .slick-current #{unquote($el)} {
    animation: enter-txt $t $k+unquote("s") $bezier forwards;
  }


  .slick-slide:not(.slick-current) {

    #{unquote($el)} {
      animation: exit-txt $t $k+unquote("s") $bezier forwards;
    }
  }

  $k: $k+0.2;
}

@keyframes shdw {
  to {
    box-shadow: 90px 3px 80px 70px $primary;
  }
}

@keyframes enter-txt {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes exit-txt {
  to {
    opacity: 0;
    @include tsY($Y);
  }
}


//displays settings
.slick-slide:not(.slick-current) .img-carousel.lazyload {
  display: none !important;
}

.slick-slide figure {
  position: absolute;
  top: 0;
}

//buttons design


.carousel.slick__arrow-large .slick-arrow > i {
  font-size: 2rem;
  text-shadow: unset;
}

